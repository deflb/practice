(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{530:function(e,t,a){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}a.d(t,"a",function(){return n})},540:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return n})},541:function(e,t,a){"use strict";var n=a(530),r=a(2),i=a.n(r);t.a=function(e){var t=Object(n.a)({},e).message,a=void 0===t?"\u65e0\u7ed3\u679c":t;return i.a.createElement("div",{className:"normalFontSizeC shallowGreyColor",style:{textAlign:"center"}},a)}},663:function(e,t,a){e.exports={wrapper:"index_wrapper__2FJ6t",wrapper_list:"index_wrapper_list__ZrwYI",wrapper_list_item:"index_wrapper_list_item__2jLe5",wrapper_list_item_title:"index_wrapper_list_item_title__3klnW",wrapper_list_item_title_pos:"index_wrapper_list_item_title_pos__2GJVt",wrapper_list_item_title_pos_tip:"index_wrapper_list_item_title_pos_tip__2laQU",wrapper_list_item_address:"index_wrapper_list_item_address__bh7cB"}},870:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return S});var n=a(540),r=(a(552),a(553)),i=a.n(r),o=a(85),s=a(86),c=a(88),l=a(87),p=a(89),u=a(2),_=a.n(u),d=a(33),h=a.n(d),m=a(247),f=a(41),w=a(541),g=a(53),b=a(47),v=a(663),y=a.n(v),N=Object(f.a)(function(){return a.e(27).then(a.bind(null,796))}),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),p=0;p<r;p++)s[p]=arguments[p];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={pageNo:1,pageSize:10,hasMore:!0,dataBlobs:[],dataSource:new i.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),isLoading:!1,height:0},a.goToDetail=function(e){var t=a.props,n=t.history,r=t.match;n.push({pathname:r.path+"/detail",state:e})},a.getNearShop=function(){var e=a.state,t=e.pageNo,r=e.pageSize,i=e.dataBlobs,o=e.dataSource;Object(g.a)({url:b.a.nearShop,data:{distance:5,flatitude:23.132456,flongitude:113.378585,pageNo:t,pageSize:r}}).then(function(e){var t=e.list,r=e.pageTurn,s=r.nextPage,c=r.rowCount;t.sort(function(e,t){return e.distance-t.distance}),t[0].isNear=1;var l=Object(n.a)(i).concat(Object(n.a)(t));a.setState({hasMore:!(l.length>=c),pageNo:s,dataBlobs:l,dataSource:o.cloneWithRows(Object(n.a)(l)),isLoading:!1})}).catch(function(e){a.setState({isLoading:!1})})},a.onEndReached=function(e){var t=a.state,n=t.isLoading,r=t.hasMore;!n&&r&&a.getNearShop()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=document.documentElement.clientHeight-h.a.findDOMNode(this.lv).getBoundingClientRect().top;this.setState({height:e}),this.getNearShop()}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataBlobs,n=t.dataSource,r=t.height,o=this.props.match;return _.a.createElement("div",{className:y.a.wrapper},_.a.createElement("div",{id:"map"}),_.a.createElement(i.a,{className:"".concat(y.a.wrapper_list," list_view_maybe_comon"),ref:function(t){return e.lv=t},dataSource:n,renderHeader:function(){return a.length?null:_.a.createElement(w.a,null)},renderRow:function(t,a,n){return _.a.createElement("ul",{className:y.a.wrapper_list_item,onClick:e.goToDetail.bind(e,t)},_.a.createElement("li",{className:y.a.wrapper_list_item_title},_.a.createElement("span",{className:y.a.wrapper_list_item_title_pos},t.fsname,1===t.isNear?_.a.createElement("span",{className:y.a.wrapper_list_item_title_pos_tip},"\u79bb\u4f60\u6700\u8fd1"):null),t.distance.toFixed(1),"km"),_.a.createElement("li",{className:y.a.wrapper_list_item_address},_.a.createElement("i",{className:"iconfont icon-address"}),t.faddress))},style:{height:r},onEndReached:this.onEndReached,onEndReachedThreshold:30}),_.a.createElement(m.a,{path:o.path+"/detail",component:N}))}}]),t}(u.Component)}}]);
//# sourceMappingURL=14.d2d9cf20.chunk.js.map