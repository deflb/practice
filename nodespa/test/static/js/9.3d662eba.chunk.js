(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{525:function(e,t,a){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}a.d(t,"a",function(){return n})},546:function(e,t,a){"use strict";var n=a(525),r=a(2),i=a.n(r);t.a=function(e){var t=Object(n.a)({},e).message,a=void 0===t?"\u65e0\u7ed3\u679c":t;return i.a.createElement("div",{className:"normalFontSizeC shallowGreyColor",style:{textAlign:"center"}},a)}},617:function(e,t,a){e.exports={wrapper:"index_wrapper__2FJ6t",wrapper_list:"index_wrapper_list__ZrwYI",wrapper_list_item:"index_wrapper_list_item__2jLe5",wrapper_list_item_title:"index_wrapper_list_item_title__3klnW",wrapper_list_item_title_pos:"index_wrapper_list_item_title_pos__2GJVt",wrapper_list_item_title_pos_tip:"index_wrapper_list_item_title_pos_tip__2laQU",wrapper_list_item_address:"index_wrapper_list_item_address__bh7cB"}},799:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return S});var n=a(541),r=(a(544),a(545)),i=a.n(r),s=a(84),o=a(85),c=a(87),l=a(86),p=a(88),_=a(2),d=a.n(_),u=a(33),h=a.n(u),m=a(240),w=a(45),f=a(546),g=a(65),v=a(50),b=a(617),N=a.n(b),E=Object(w.a)(function(){return a.e(21).then(a.bind(null,758))}),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),p=0;p<r;p++)o[p]=arguments[p];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={pageNo:1,pageSize:10,hasMore:!0,dataBlobs:[],dataSource:new i.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),isLoading:!1,height:0},a.goToDetail=function(e){var t=a.props,n=t.history,r=t.match;n.push({pathname:r.path+"/detail",state:e})},a.getNearShop=function(){var e=a.state,t=e.pageNo,r=e.pageSize,i=e.dataBlobs,s=e.dataSource;Object(g.a)({url:v.a.nearShop,data:{distance:5,flatitude:23.132456,flongitude:113.378585,pageNo:t,pageSize:r}}).then(function(e){var t=e.list,r=e.pageTurn,o=r.nextPage,c=r.rowCount;t.sort(function(e,t){return e.distance-t.distance}),t[0].isNear=1;var l=Object(n.a)(i).concat(Object(n.a)(t));a.setState({hasMore:!(l.length>=c),pageNo:o,dataBlobs:l,dataSource:s.cloneWithRows(Object(n.a)(l)),isLoading:!1})}).catch(function(e){a.setState({isLoading:!1})})},a.onEndReached=function(e){var t=a.state,n=t.isLoading,r=t.hasMore;!n&&r&&a.getNearShop()},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=document.documentElement.clientHeight-h.a.findDOMNode(this.lv).getBoundingClientRect().top;this.setState({height:e}),this.getNearShop()}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataBlobs,n=t.dataSource,r=t.height,s=this.props.match;return d.a.createElement("div",{className:N.a.wrapper},d.a.createElement("div",{id:"map"}),d.a.createElement(i.a,{className:"".concat(N.a.wrapper_list," list_view_maybe_comon"),ref:function(t){return e.lv=t},dataSource:n,renderHeader:function(){return a.length?null:d.a.createElement(f.a,null)},renderRow:function(t,a,n){return d.a.createElement("ul",{className:N.a.wrapper_list_item,onClick:e.goToDetail.bind(e,t)},d.a.createElement("li",{className:N.a.wrapper_list_item_title},d.a.createElement("span",{className:N.a.wrapper_list_item_title_pos},t.fsname,1===t.isNear?d.a.createElement("span",{className:N.a.wrapper_list_item_title_pos_tip},"\u79bb\u4f60\u6700\u8fd1"):null),t.distance.toFixed(1),"km"),d.a.createElement("li",{className:N.a.wrapper_list_item_address},d.a.createElement("i",{className:"iconfont icon-address"}),t.faddress))},style:{height:r},onEndReached:this.onEndReached,onEndReachedThreshold:30}),d.a.createElement(m.a,{path:s.path+"/detail",component:E}))}}]),t}(_.Component)}}]);
//# sourceMappingURL=9.3d662eba.chunk.js.map