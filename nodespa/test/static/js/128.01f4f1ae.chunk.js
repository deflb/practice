webpackJsonp([128],{1639:function(e,t,n){var a=n(1640);"string"===typeof a&&(a=[[e.i,a,""]]);var o={};o.transform=void 0;n(855)(a,o);a.locals&&(e.exports=a.locals)},1640:function(e,t,n){t=e.exports=n(854)(!0),t.push([e.i,".c45tZMManyL53OUbJiAfT{text-align:center;overflow:hidden;position:relative}.c45tZMManyL53OUbJiAfT ._1qowRdMPBYdNE_KT7ry7Pa{background-color:#0062ad;height:14vh;min-height:65px;color:#fff;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.c45tZMManyL53OUbJiAfT ._1qowRdMPBYdNE_KT7ry7Pa>div{margin-bottom:16px;color:#ededed;text-shadow:#000 8px 8px 12px;font-size:24px}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH{background-color:#ededed;height:86vh}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH .JUlNTcdExbK9SX6StpbMT{position:absolute;top:50%;left:50%;margin-left:-198px;margin-top:-178px;text-align:center;width:396px;height:356px;padding:24px;font-size:20px;background-color:#fff;-webkit-box-shadow:#666 3px 6px 10px;box-shadow:3px 6px 10px #666}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH ._3NTRyQwicphsE3YhRms2zM{position:absolute;bottom:12px;left:50%;margin-left:-30px;color:#666}","",{version:3,sources:["E:/sf/src/style/loginCommon.less"],names:[],mappings:"AAAA,uBACE,kBAAmB,AACnB,gBAAiB,AACjB,iBAAmB,CACpB,AACD,gDACE,yBAA0B,AAC1B,YAAa,AACb,gBAAiB,AACjB,WAAa,AACb,oBAAqB,AACrB,aAAc,AACd,kCAAmC,AAC/B,6BAA+B,CACpC,AACD,oDACE,mBAAoB,AACpB,cAAe,AACf,8BAA+B,AAC/B,cAAgB,CACjB,AACD,8CACE,yBAA0B,AAC1B,WAAa,CACd,AACD,qEACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,mBAAoB,AACpB,kBAAmB,AACnB,kBAAmB,AACnB,YAAa,AACb,aAAc,AACd,aAAc,AACd,eAAgB,AAChB,sBAAwB,AACxB,qCAAsC,AACtC,4BAA8B,CAC/B,AACD,uEACE,kBAAmB,AACnB,YAAa,AACb,SAAU,AACV,kBAAmB,AACnB,UAAY,CACb",file:"loginCommon.less",sourcesContent:[".login {\n  text-align: center;\n  overflow: hidden;\n  position: relative;\n}\n.login .header {\n  background-color: #0062ad;\n  height: 14vh;\n  min-height: 65px;\n  color: white;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column-reverse;\n      flex-direction: column-reverse;\n}\n.login .header > div {\n  margin-bottom: 16px;\n  color: #ededed;\n  text-shadow: #000 8px 8px 12px;\n  font-size: 24px;\n}\n.login .intro {\n  background-color: #ededed;\n  height: 86vh;\n}\n.login .intro .borderDiv {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -198px;\n  margin-top: -178px;\n  text-align: center;\n  width: 396px;\n  height: 356px;\n  padding: 24px;\n  font-size: 20px;\n  background-color: white;\n  -webkit-box-shadow: #666 3px 6px 10px;\n  box-shadow: #666 3px 6px 10px;\n}\n.login .intro .author {\n  position: absolute;\n  bottom: 12px;\n  left: 50%;\n  margin-left: -30px;\n  color: #666;\n}\n"],sourceRoot:""}]),t.locals={login:"c45tZMManyL53OUbJiAfT",header:"_1qowRdMPBYdNE_KT7ry7Pa",intro:"zkBj5k3tmwCfX6ji7-3kH",borderDiv:"JUlNTcdExbK9SX6StpbMT",author:"_3NTRyQwicphsE3YhRms2zM"}},989:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),s=(n.n(r),n(56)),c=n.n(s),l=n(314),p=(n.n(l),n(317)),d=n.n(p),A=n(130),m=(n.n(A),n(131)),h=n.n(m),u=n(132),f=(n.n(u),n(133)),g=n.n(f),C=n(135),b=(n.n(C),n(49)),y=n.n(b),x=n(315),B=(n.n(x),n(316)),k=n.n(B),v=n(320),E=(n.n(v),n(321)),w=n.n(E),j=n(1),M=n.n(j),O=n(1639),S=n.n(O),T=n(84),_=n(346),N=(n.n(_),n(101)),z=n(134),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),K=w.a.Item,P=function(e,t){k.a.error(e,t)},U=function(e){function t(e,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleSubmit=function(e){e.preventDefault(),i.props.form.validateFields(function(e,t){e||Object(T.k)("/auth/sso/publicKey",{merchantCode:t.merchantCode,userName:t.userName},function(e){if(0!==e.data.msgcode)i.changeimg(),P(e.data.data,3);else{var n=e.data.data,a=new _.JSEncrypt({default_key_size:"1024"});a.setPrivateKey(n);var o=a.encrypt(t.password),r={captcha:t.checknum,captchaKey:i.state.captchaKey,merchantCode:t.merchantCode,password:o,userName:t.userName,loginType:"1"};i.login(r)}})})},i.state={bottom:26,captchaKey:"",needCheckCode:!0,hasMerCode:!0},i.getcheckimg=i.getcheckimg.bind(i),i.changeimg=i.changeimg.bind(i),i}return i(t,e),D(t,[{key:"login",value:function(e){var t=this;Object(T.k)("/auth/sso/login",e,function(n){var a=n.data;0!==a.msgcode?(t.changeimg(),P(a.data,3),Object(T.b)("/needCaptcha",function(e){0===e.msgcode&&t.setState({needCheckCode:e.data})})):(sessionStorage.setItem("uuid",a.data),sessionStorage.setItem("username",e.userName),sessionStorage.setItem("loginType","7"),Object(N.c)("loginType","7"),Object(N.c)("uuid",a.data),Object(N.c)("username",e.userName),Object(N.c)("breadlist",""),t.props.history.push("/"))})}},{key:"componentWillMount",value:function(){var e=Object(N.b)("uuid"),t=Object(N.b)("loginType"),n=Object(N.b)("username");e&&t&&n&&(sessionStorage.setItem("loginType",t),sessionStorage.setItem("username",n),sessionStorage.setItem("uuid",e),this.props.history.push("/"))}},{key:"componentDidMount",value:function(){var e=this;if(Object(z.d)("sf")){if(Object(z.z)("1"),Object(T.b)("/needCaptcha",function(t){0===t.msgcode&&e.setState({needCheckCode:t.data})}),void 0===this.props.location.state)if("SF"===Object(z.q)()){var t=window.location.hostname,n=t.split("."),a=n[0];this.props.form.setFieldsValue({merchantCode:a}),this.setState({hasMerCode:!0})}else this.setState({hasMerCode:!1});else{var o=this.props.location.state.merchantCode;this.props.form.setFieldsValue({merchantCode:o}),this.setState({hasMerCode:!0})}this.getcheckimg()}else this.props.history.push("/notfound")}},{key:"changeimg",value:function(){this.refs.checkimg.innerHTML="",this.getcheckimg()}},{key:"getcheckimg",value:function(){for(var e="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789",t="",n=0;n<12;n++)t+=e.charAt(Math.floor(Math.random()*e.length));this.setState({captchaKey:t});var a=document.createElement("img");a.src=T.a+"/captcha?captchaKey="+t,this.refs.checkimg.appendChild(a)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return M.a.createElement("div",{className:S.a.login},M.a.createElement("div",{className:S.a.header},M.a.createElement("div",null,"\u6570\u592b\u6848\u4f8b\u5e93")),M.a.createElement("div",{className:S.a.intro},M.a.createElement("div",{className:S.a.borderDiv},M.a.createElement("div",{style:{marginBottom:this.state.bottom+"px"}},M.a.createElement(h.a,{type:"flex",align:"top",justify:"space-around"},M.a.createElement(g.a,{span:8,push:5},M.a.createElement(y.a,{type:"github",style:{fontSize:20,color:"#0062ad"}})),M.a.createElement(g.a,{span:16,pull:3},M.a.createElement("div",null,"\u6b22\u8fce\u767b\u9646")))),M.a.createElement(h.a,{type:"flex",align:"top",justify:"space-around"},M.a.createElement(g.a,{span:18},M.a.createElement(w.a,{onSubmit:this.handleSubmit},M.a.createElement(K,{style:{display:this.state.hasMerCode?"none":null},hasFeedback:!0},e("merchantCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f01\u4e1aid!"}]})(M.a.createElement(d.a,{prefix:M.a.createElement(y.a,{type:"user",style:{fontSize:13}}),placeholder:"\u4f01\u4e1aid"}))),M.a.createElement(K,{hasFeedback:!0},e("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(M.a.createElement(d.a,{prefix:M.a.createElement(y.a,{type:"user",style:{fontSize:13}}),placeholder:"\u7528\u6237\u540d"}))),M.a.createElement(K,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(M.a.createElement(d.a,{prefix:M.a.createElement(y.a,{type:"lock",style:{fontSize:13}}),type:"password",placeholder:"\u5bc6\u7801"}))),M.a.createElement(K,{hasFeedback:!0,style:{display:!0===this.state.needCheckCode?null:"none"}},e("checknum",{rules:[{required:!1,len:4,message:"\u8bf7\u8f93\u51654\u4f4d\u9a8c\u8bc1\u7801!"}]})(M.a.createElement(d.a,{style:{width:"160px",float:"left"},placeholder:"\u9a8c\u8bc1\u7801"})),M.a.createElement("div",{onClick:this.changeimg,ref:"checkimg",id:"checkimg",style:{float:"right",height:"34px",width:"99px",zindex:99999}})),M.a.createElement(K,null,M.a.createElement(c.a,{size:"large",style:{background:"#1DA57A"},type:"primary",htmlType:"submit"},"\u767b\u5f55"))))))))}}]),t}(j.Component),J=w.a.create()(U);t.default=J}});