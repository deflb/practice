webpackJsonp([129],{1639:function(e,t,n){var a=n(1640);"string"===typeof a&&(a=[[e.i,a,""]]);var o={};o.transform=void 0;n(855)(a,o);a.locals&&(e.exports=a.locals)},1640:function(e,t,n){t=e.exports=n(854)(!0),t.push([e.i,".c45tZMManyL53OUbJiAfT{text-align:center;overflow:hidden;position:relative}.c45tZMManyL53OUbJiAfT ._1qowRdMPBYdNE_KT7ry7Pa{background-color:#0062ad;height:14vh;min-height:65px;color:#fff;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.c45tZMManyL53OUbJiAfT ._1qowRdMPBYdNE_KT7ry7Pa>div{margin-bottom:16px;color:#ededed;text-shadow:#000 8px 8px 12px;font-size:24px}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH{background-color:#ededed;height:86vh}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH .JUlNTcdExbK9SX6StpbMT{position:absolute;top:50%;left:50%;margin-left:-198px;margin-top:-178px;text-align:center;width:396px;height:356px;padding:24px;font-size:20px;background-color:#fff;-webkit-box-shadow:#666 3px 6px 10px;box-shadow:3px 6px 10px #666}.c45tZMManyL53OUbJiAfT .zkBj5k3tmwCfX6ji7-3kH ._3NTRyQwicphsE3YhRms2zM{position:absolute;bottom:12px;left:50%;margin-left:-30px;color:#666}","",{version:3,sources:["E:/sf/src/style/loginCommon.less"],names:[],mappings:"AAAA,uBACE,kBAAmB,AACnB,gBAAiB,AACjB,iBAAmB,CACpB,AACD,gDACE,yBAA0B,AAC1B,YAAa,AACb,gBAAiB,AACjB,WAAa,AACb,oBAAqB,AACrB,aAAc,AACd,kCAAmC,AAC/B,6BAA+B,CACpC,AACD,oDACE,mBAAoB,AACpB,cAAe,AACf,8BAA+B,AAC/B,cAAgB,CACjB,AACD,8CACE,yBAA0B,AAC1B,WAAa,CACd,AACD,qEACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,mBAAoB,AACpB,kBAAmB,AACnB,kBAAmB,AACnB,YAAa,AACb,aAAc,AACd,aAAc,AACd,eAAgB,AAChB,sBAAwB,AACxB,qCAAsC,AACtC,4BAA8B,CAC/B,AACD,uEACE,kBAAmB,AACnB,YAAa,AACb,SAAU,AACV,kBAAmB,AACnB,UAAY,CACb",file:"loginCommon.less",sourcesContent:[".login {\n  text-align: center;\n  overflow: hidden;\n  position: relative;\n}\n.login .header {\n  background-color: #0062ad;\n  height: 14vh;\n  min-height: 65px;\n  color: white;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column-reverse;\n      flex-direction: column-reverse;\n}\n.login .header > div {\n  margin-bottom: 16px;\n  color: #ededed;\n  text-shadow: #000 8px 8px 12px;\n  font-size: 24px;\n}\n.login .intro {\n  background-color: #ededed;\n  height: 86vh;\n}\n.login .intro .borderDiv {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -198px;\n  margin-top: -178px;\n  text-align: center;\n  width: 396px;\n  height: 356px;\n  padding: 24px;\n  font-size: 20px;\n  background-color: white;\n  -webkit-box-shadow: #666 3px 6px 10px;\n  box-shadow: #666 3px 6px 10px;\n}\n.login .intro .author {\n  position: absolute;\n  bottom: 12px;\n  left: 50%;\n  margin-left: -30px;\n  color: #666;\n}\n"],sourceRoot:""}]),t.locals={login:"c45tZMManyL53OUbJiAfT",header:"_1qowRdMPBYdNE_KT7ry7Pa",intro:"zkBj5k3tmwCfX6ji7-3kH",borderDiv:"JUlNTcdExbK9SX6StpbMT",author:"_3NTRyQwicphsE3YhRms2zM"}},986:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(72),c=(n.n(s),n(56)),l=n.n(c),d=n(314),p=(n.n(d),n(317)),A=n.n(p),m=n(135),h=(n.n(m),n(49)),u=n.n(h),f=n(130),g=(n.n(f),n(131)),b=n.n(g),C=n(132),y=(n.n(C),n(133)),x=n.n(y),B=n(315),k=(n.n(B),n(316)),v=n.n(k),E=n(320),w=(n.n(E),n(321)),j=n.n(w),M=n(1),O=n.n(M),S=n(97),T=n(1639),_=n.n(T),D=n(101),N=n(361),z=n.n(N),U=n(84),K=n(213),P=n.n(K),q=n(87),J=n(346),I=(n.n(J),n(134)),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Y=j.a.Item,L=function(e,t){v.a.error(e,t)},F=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleSubmit=function(e){e.preventDefault(),r.props.form.validateFields(function(e,t){e||Object(U.k)("/auth/sso/publicKey",{merchantCode:t.merchantCode,userName:t.userName},function(e){if(0!==e.data.msgcode)r.changeimg(),L(e.data.data,3);else{var n=e.data.data,a=new J.JSEncrypt({default_key_size:"1024"});a.setPrivateKey(n);var o=a.encrypt(t.password),i={captcha:t.checknum,captchaKey:r.state.captchaKey,merchantCode:t.merchantCode,password:o,userName:t.userName,loginType:"1"};r.login(i)}})})},r.getCDSUserById=function(e){P.a.create({headers:{Authorization:"Bearer "+e,X_Requested_Key:"2,"}}).post(U.a+"/general/user/userInfo",{}).then(function(e){if(0===e.data.msgcode){var t=e.data.data;(0,r.props.dispatch)(Object(q.T)(t))}})},r.state={bottom:26,captchaKey:"",hasMerCode:!0,needCheckCode:!0},r.getcheckimg=r.getcheckimg.bind(r),r.changeimg=r.changeimg.bind(r),r}return r(t,e),R(t,[{key:"login",value:function(e){var t=this;Object(U.k)("/auth/sso/login",e,function(n){var a=n.data;0!==a.msgcode?(t.changeimg(),L(a.data,3),Object(U.b)("/needCaptcha",function(e){0===e.msgcode&&t.setState({needCheckCode:e.data})})):(sessionStorage.setItem("uuid",a.data),sessionStorage.setItem("username",e.userName),sessionStorage.setItem("loginType","2"),Object(D.c)("loginType","2"),Object(D.c)("uuid",a.data),Object(D.c)("username",e.userName),Object(D.c)("breadlist",""),t.getCDSUserById(a.data),t.props.history.push("/"))})}},{key:"componentWillMount",value:function(){var e=Object(D.b)("uuid"),t=Object(D.b)("loginType"),n=Object(D.b)("username");e&&t&&n&&(sessionStorage.setItem("loginType",t),sessionStorage.setItem("username",n),sessionStorage.setItem("uuid",e),this.props.history.push("/"))}},{key:"componentDidMount",value:function(){var e=this;if(Object(I.d)("3d")){var t=Object(D.b)("loginType");if(Object(I.z)(t),Object(U.b)("/needCaptcha",function(t){0===t.msgcode&&e.setState({needCheckCode:t.data})}),void 0===this.props.location.state)if("3D"===Object(I.q)()){var n=window.location.hostname,a=n.split("."),o=a[0];this.props.form.setFieldsValue({merchantCode:o}),this.setState({hasMerCode:!0})}else this.setState({hasMerCode:!1});else{var r=this.props.location.state.merchantCode;this.props.form.setFieldsValue({merchantCode:r}),this.setState({hasMerCode:!0})}this.getcheckimg()}else this.props.history.push("/notfound")}},{key:"changeimg",value:function(){this.refs.checkimg.innerHTML="",this.getcheckimg()}},{key:"getcheckimg",value:function(){for(var e="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789",t="",n=0;n<12;n++)t+=e.charAt(Math.floor(Math.random()*e.length));this.setState({captchaKey:t});var a=document.createElement("img");a.src=U.a+"/captcha?captchaKey="+t,a.alt="\u9a8c\u8bc1\u7801",this.refs.checkimg.appendChild(a)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return O.a.createElement("div",{className:_.a.login},O.a.createElement("div",{className:_.a.header},O.a.createElement("div",null,"3D\u4e91\u8bbe\u8ba1")),O.a.createElement("div",{className:_.a.intro},O.a.createElement("div",{className:_.a.borderDiv},O.a.createElement("div",{style:{marginBottom:this.state.bottom+"px"}},O.a.createElement(b.a,{type:"flex",align:"top",justify:"space-around"},O.a.createElement(x.a,{span:8,push:5},O.a.createElement("img",{src:z.a,alt:""})),O.a.createElement(x.a,{span:16,pull:3},O.a.createElement("div",null,"\u6b22\u8fce\u767b\u9646")))),O.a.createElement(b.a,{type:"flex",align:"top",justify:"space-around"},O.a.createElement(x.a,{span:18},O.a.createElement(j.a,{onSubmit:this.handleSubmit},O.a.createElement(Y,{style:{display:this.state.hasMerCode?"none":null},hasFeedback:!0},e("merchantCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f01\u4e1aid!"}]})(O.a.createElement(A.a,{prefix:O.a.createElement(u.a,{type:"user",style:{fontSize:13}}),placeholder:"\u4f01\u4e1aid"}))),O.a.createElement(Y,{hasFeedback:!0},e("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(O.a.createElement(A.a,{prefix:O.a.createElement(u.a,{type:"user",style:{fontSize:13}}),placeholder:"\u7528\u6237\u540d"}))),O.a.createElement(Y,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(O.a.createElement(A.a,{prefix:O.a.createElement(u.a,{type:"lock",style:{fontSize:13}}),type:"password",placeholder:"\u5bc6\u7801"}))),O.a.createElement(Y,{hasFeedback:!0,style:{display:!0===this.state.needCheckCode?null:"none"}},e("checknum",{rules:[{required:!1,len:4,message:"\u8bf7\u8f93\u51654\u4f4d\u9a8c\u8bc1\u7801!"}]})(O.a.createElement(A.a,{style:{width:"160px",float:"left"},placeholder:"\u9a8c\u8bc1\u7801"})),O.a.createElement("div",{onClick:this.changeimg,ref:"checkimg",id:"checkimg",style:{float:"right",height:"34px",width:"99px",zindex:99999}})),O.a.createElement(Y,null,O.a.createElement(l.a,{size:"large",style:{background:"#1DA57A"},type:"primary",htmlType:"submit"},"\u767b\u9646"))))))))}}]),t}(M.Component),X=j.a.create()(F);t.default=Object(S.b)(i)(X)}});